<!DOCTYPE html><html> <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><meta name="robots" content="noindex, nofollow"><title>User task server</title><link rel="stylesheet" type="text/css" href="../../assets/style/page/style.css"><link href="../../assets/prismjs/prism-coy.min.css" rel="stylesheet"><link href="../../assets/prismjs/prism-line-numbers.min.css" rel="stylesheet"><link rel="icon" href="../../assets/images/page/favicon-32w.ico" sizes="any"><link rel="icon" href="../../assets/images/page/favicon.svg" type="image/svg+xml"><link rel="apple-touch-icon" type="image/png" href="../../assets/images/page/favicon-180w.png"></head><body class="line-numbers"><nav class="menu"><div class="menu-logo"><a href="../../index.html" title="Home"><img src="../../assets/images/page/logo.svg" alt="User task server"></a></div><div class="menu-branch"><a class="menu-toggle menu-toggle-branches" href="#menu-branches" aria-controls="menu-branches" aria-expanded="false"><span class="label">Versie:</span><span class="icon"><svg class="octicon octicon-git-branch" aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" d="M11.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122V6A2.5 2.5 0 0110 8.5H6a1 1 0 00-1 1v1.128a2.251 2.251 0 11-1.5 0V5.372a2.25 2.25 0 111.5 0v1.836A2.492 2.492 0 016 7h4a1 1 0 001-1v-.628A2.25 2.25 0 019.5 3.25zM4.25 12a.75.75 0 100 1.5.75.75 0 000-1.5zM3.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0z"/></svg></span><span class="name">main</span></a></div><div class="menu-branches" id="menu-branches" hidden="true"><div class="menu-branches-search"><input class="list-search" type="search" name="menu-branches-search" placeholder="Find a branch" aria-controls="list-branches"></div><ul id="list-branches"></ul></div><div class="menu-main" id="menu-main"><div class="menu-pages-search"><input class="list-search" type="search" name="menu-pages-search" placeholder="Find a page" aria-controls="list-pages"></div><ul id="list-pages"><li class="active-child"><a href="../../index.html" aria-expanded="true">Home</a></li><li class="has-sibbling active-sibbling"><a href="../../bpmn-extensions/index.html" aria-expanded="false">Bpmn extensions</a><ul hidden="hidden"><li><a href="../../bpmn-extensions/task-meta-description-plugin/index.html" aria-expanded="false">Task meta description plugin</a></li></ul></li><li class="active-sibbling"><a href="../../bpmn-tester/index.html" aria-expanded="false">Bpmn tester</a></li><li class="active-sibbling"><a href="../../brand/index.html" aria-expanded="false">Brand</a></li><li class="has-sibbling active-sibbling"><a href="../../common/index.html" aria-expanded="false">Common</a><ul hidden="hidden"><li><a href="../../common/cqrs/index.html" aria-expanded="false">Cqrs</a></li><li><a href="../../common/ddd/index.html" aria-expanded="false">Ddd</a></li><li><a href="../../common/email/index.html" aria-expanded="false">Email</a></li><li><a href="../../common/iam/index.html" aria-expanded="false">Iam</a></li></ul></li><li class="active-sibbling"><a href="../../md-docs-cli/index.html" aria-expanded="false">Md docs cli</a></li><li class="active-child has-sibbling"><a href="../../user-task-management/index.html" aria-expanded="true">User task management</a><ul><li class="active-sibbling"><a href="../../user-task-management/user-task-provider/index.html" aria-expanded="false">User task provider</a></li><li class="active"><a href="../../user-task-management/user-task-server/index.html" aria-expanded="true">User task server</a></li></ul></li></ul></div><div class="menu-footer"><ul><li><a class="git" href="https://github.com/synionnl/synionnl.github.io/blob/main/docs/user-task-management/user-task-server/index.md" title="View source file"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 16 16" fill="none" title="github"><path d="M15.698 7.287 8.712.302a1.03 1.03 0 0 0-1.457 0l-1.45 1.45 1.84 1.84a1.223 1.223 0 0 1 1.55 1.56l1.773 1.774a1.224 1.224 0 0 1 1.267 2.025 1.226 1.226 0 0 1-2.002-1.334L8.58 5.963v4.353a1.226 1.226 0 1 1-1.008-.036V5.887a1.226 1.226 0 0 1-.666-1.608L5.093 2.465l-4.79 4.79a1.03 1.03 0 0 0 0 1.457l6.986 6.986a1.03 1.03 0 0 0 1.457 0l6.953-6.953a1.031 1.031 0 0 0 0-1.457"></path></svg></span></a></li></ul></div></nav><main><header><ul class="breadcrumb"><li><a href="../../index.html">Home</a></li><li><a href="../../user-task-management/index.html">User task management</a><li><span class="menu-toggle" aria-controls="next-sibling">User task server</span></li></li></ul><h1 class="title">User task server</h1><nav class="table-of-content"><ul><li><a href="#product">Product </a></li><li><a href="#context">Context </a></li><li><a href="#order-algorithm">Order algorithm </a></li></ul></nav></header><div class="content"><div class="header-container h2">
    <div class="header"><h2 id="product" tabindex="-1">Product <a class="header-anchor" href="#product">¶</a></h2></div>
    <div class="container">
<p>The user task server acts as an <a href="https://www.enterpriseintegrationpatterns.com/Aggregator.html">aggregator</a>. It asks, on behalve of a user, every <a href="../user-task-provider/index.html">user task provider</a> to return a maximum of n tasks.
The <a href="../user-task-provider/index.html">user task provider</a> returns tasks which are claimed by the user or unclaimed task which can be claimed by the user (is authorized to claim).
All the responses are aggregated into one collection containing a maximum of n tasks ordered by an [order algorithm].</p>
<p>The user task server is a stateless <a href="https://www.enterpriseintegrationpatterns.com/Aggregator.html">aggregator</a> and it depends on decentralized state provided by the <a href="../user-task-provider/index.html">user task provider</a>s. Alle logic related to user task priority, authorization and handling is implemented by the <a href="../user-task-provider/index.html">user task provider</a>.</p>
<div class="tabs-container"><div class="tabs-list-container"><div class="tabs-scroll-container"><ul><li><a href="#product-api" aria-expanded="true">API</a></li><li><a href="#product-acceptance-criteria" aria-expanded="false">Acceptance criteria</a></li></ul></div></div><div class="tabs-panels-container"><div id="product-api"><div data-fullscreen="false"><header><button type="button" title="Maximize" data-toggle="fullscreen"><span class="label">Zoom</span></button></header><iframe class="openapi" src="./product.openapi.yaml.html?_v=304536232614c805a2442bb43e9aadcab2be04cf9ec9c7beca6e791a12c5ee99"></iframe><footer>   <button type="button" title="Maximize" data-toggle="fullscreen"><span class="label">Zoom</span></button><div class="figure-zoom"><button type="button" title="Zoom reset" data-figure-zoom="reset"><span class="label">↺</span></button><button type="button" title="Zoom in" data-figure-zoom="in"><span class="label">+</span></button><button type="button" title="Zoom uit" data-figure-zoom="out"><span class="label">−</span></button></div></footer></div></div><div id="product-acceptance-criteria" hidden="hidden"><div class="feature-list"><details class="feature"><summary><span class="status status-group"><figure class="chart chart-doughnut"><svg viewBox="0 0 63.662 63.662"><circle class="circle-base" cx="31.831" cy="31.831" r="15.9155" fill="none" stroke-width="31.831"></circle><circle class="circle-undefined" cx="31.831" cy="31.831" r="15.9155" fill="none" stroke-width="31.831" stroke-dasharray="100 100" stroke-dashoffset="0"></circle><circle cx="31.831" cy="31.831" r="15.9155" fill="white" stroke-width="0"></circle></svg></figure><span>User task server product</span></span></summary><details class="scenario"><summary><span class="status status-group"><figure class="chart chart-doughnut"><svg viewBox="0 0 63.662 63.662"><circle class="circle-base" cx="31.831" cy="31.831" r="15.9155" fill="none" stroke-width="31.831"></circle><circle class="circle-undefined" cx="31.831" cy="31.831" r="15.9155" fill="none" stroke-width="31.831" stroke-dasharray="100 100" stroke-dashoffset="0"></circle><circle cx="31.831" cy="31.831" r="15.9155" fill="white" stroke-width="0"></circle></svg></figure><span>May not review own answer</span></span></summary><ul class="steps">             <li class="step given"><span class="status status-bg status-undefined"> <span class="keyword">Given</span><span> </span><span>a review anwser task</span></span></li><li class="step and"><span class="status status-bg status-undefined"> <span class="keyword">And</span><span> </span><span>"john" is the person who has created the answer</span></span></li><li class="step and"><span class="status status-bg status-undefined"> <span class="keyword">And</span><span> </span><span>"john" is the user</span></span></li><li class="step when"><span class="status status-bg status-undefined"> <span class="keyword">When</span><span> </span><span>the user claims the task</span></span></li><li class="step then"><span class="status status-bg status-undefined"> <span class="keyword">Then</span><span> </span><span>an authorization exception must be thrown</span></span></li><li class="step and"><span class="status status-bg status-undefined"> <span class="keyword">And</span><span> </span><span>the task should not be claimed</span></span></li></ul></details><details class="scenario"><summary><span class="status status-group"><figure class="chart chart-doughnut"><svg viewBox="0 0 63.662 63.662"><circle class="circle-base" cx="31.831" cy="31.831" r="15.9155" fill="none" stroke-width="31.831"></circle><circle class="circle-undefined" cx="31.831" cy="31.831" r="15.9155" fill="none" stroke-width="31.831" stroke-dasharray="100 100" stroke-dashoffset="0"></circle><circle cx="31.831" cy="31.831" r="15.9155" fill="white" stroke-width="0"></circle></svg></figure><span>May not delegate review task to the person who answered the question</span></span></summary><ul class="steps">             <li class="step given"><span class="status status-bg status-undefined"> <span class="keyword">Given</span><span> </span><span>a review answer task</span></span></li><li class="step and"><span class="status status-bg status-undefined"> <span class="keyword">And</span><span> </span><span>"john" is the person who has created the answer</span></span></li><li class="step and"><span class="status status-bg status-undefined"> <span class="keyword">And</span><span> </span><span>"julia" is the person who has claimed the task</span></span></li><li class="step and"><span class="status status-bg status-undefined"> <span class="keyword">And</span><span> </span><span>"julia" is the user</span></span></li><li class="step when"><span class="status status-bg status-undefined"> <span class="keyword">When</span><span> </span><span>the user delegates the task to "john"</span></span></li><li class="step then"><span class="status status-bg status-undefined"> <span class="keyword">Then</span><span> </span><span>an authorization exception must be thrown</span></span></li><li class="step and"><span class="status status-bg status-undefined"> <span class="keyword">And</span><span> </span><span>the task should not be delegated</span></span></li></ul></details></details></div></div></div></div>
</div>
</div><div class="header-container h2">
    <div class="header"><h2 id="context" tabindex="-1">Context <a class="header-anchor" href="#context">¶</a></h2></div>
    <div class="container">
<div data-fullscreen="false"><header><button type="button" title="Maximize" data-toggle="fullscreen"><span class="label">Zoom</span></button></header><figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="316px" preserveAspectRatio="none" style="width:594px;height:316px;" version="1.1" viewBox="0 0 594 316" width="594px" zoomAndPan="magnify" data-generator="markdown"><defs><filter height="300%" id="f40g3tfj4dos3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><!--MD5=[fee662a292a0353a69bd162820bae93b]
entity User--><ellipse cx="294.5" cy="17.5" fill="#FEFECE" filter="url(#f40g3tfj4dos3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M294.5,25.5 L294.5,52.5 M281.5,33.5 L307.5,33.5 M294.5,52.5 L281.5,67.5 M294.5,52.5 L307.5,67.5 " fill="none" filter="url(#f40g3tfj4dos3)" style="stroke: #A80036; stroke-width: 1.5;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="278.5" y="85.9951">User</text><ellipse cx="294.569" cy="173.0084" fill="#FEFECE" filter="url(#f40g3tfj4dos3)" rx="83.569" ry="24.0084" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="63" x="263.069" y="166.4691">«Server»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="232.069" y="182.7659">Get my user tasks</text><ellipse cx="90.5284" cy="281.2585" fill="#FEFECE" filter="url(#f40g3tfj4dos3)" rx="84.5284" ry="24.2585" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="53.5284" y="275.1122">«Provider»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="28.0284" y="291.409">Get my user tasks</text><ellipse cx="294.5284" cy="281.2585" fill="#FEFECE" filter="url(#f40g3tfj4dos3)" rx="84.5284" ry="24.2585" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="257.5284" y="275.1122">«Provider»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="232.0284" y="291.409">Get my user tasks</text><ellipse cx="498.5284" cy="281.2585" fill="#FEFECE" filter="url(#f40g3tfj4dos3)" rx="84.5284" ry="24.2585" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="461.5284" y="275.1122">«Provider»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="436.0284" y="291.409">Get my user tasks</text><!--MD5=[9b1e83a301d632e8d5a1d64f176fc1f5]
link User to Use--><path d="M294.5,89.27 C294.5,106.97 294.5,127.41 294.5,143.55 " fill="none" id="User->Use" style="stroke: #A80036; stroke-width: 1.0;"></path><polygon fill="#A80036" points="294.5,148.84,298.5,139.84,294.5,143.84,290.5,139.84,294.5,148.84" style="stroke: #A80036; stroke-width: 1.0;"></polygon><!--MD5=[c071da3930e890b521cca13c7df6b6e9]
link Use to Use1--><path d="M255.65,194.28 C221.24,212.25 171.03,238.46 135.01,257.26 " fill="none" id="Use->Use1" style="stroke: #A80036; stroke-width: 1.0;"></path><polygon fill="#A80036" points="130.25,259.75,140.0799,259.1397,134.6844,257.4401,136.3841,252.0446,130.25,259.75" style="stroke: #A80036; stroke-width: 1.0;"></polygon><!--MD5=[bbf4424feda0db7f11c9736f52b090c5]
link Use to Use2--><path d="M294.5,197.11 C294.5,213.08 294.5,234.43 294.5,251.54 " fill="none" id="Use->Use2" style="stroke: #A80036; stroke-width: 1.0;"></path><polygon fill="#A80036" points="294.5,256.7,298.5,247.7,294.5,251.7,290.5,247.7,294.5,256.7" style="stroke: #A80036; stroke-width: 1.0;"></polygon><!--MD5=[92a8cbdae377442c1800e5aee7ef44ab]
link Use to Use3--><path d="M333.35,194.28 C367.76,212.25 417.97,238.46 453.99,257.26 " fill="none" id="Use->Use3" style="stroke: #A80036; stroke-width: 1.0;"></path><polygon fill="#A80036" points="458.75,259.75,452.6159,252.0446,454.3156,257.4401,448.9201,259.1397,458.75,259.75" style="stroke: #A80036; stroke-width: 1.0;"></polygon><!--MD5=[7d8b5f69637504203af040d7d77c028c]
@startuml

:User:

(Get my user tasks) as (Use) << Server >>

(Get my user tasks) as (Use1) << Provider >>
(Get my user tasks) as (Use2) << Provider >>
(Get my user tasks) as (Use3) << Provider >>

User - -> (Use)

(Use) - -> (Use1)
(Use) - -> (Use2)
(Use) - -> (Use3)

@enduml

PlantUML version 1.2020.10(Sun May 17 09:35:57 UTC 2020)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.20.1+1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></figure><footer>   <button type="button" title="Maximize" data-toggle="fullscreen"><span class="label">Zoom</span></button><div class="figure-zoom"><button type="button" title="Zoom reset" data-figure-zoom="reset"><span class="label">↺</span></button><button type="button" title="Zoom in" data-figure-zoom="in"><span class="label">+</span></button><button type="button" title="Zoom uit" data-figure-zoom="out"><span class="label">−</span></button></div></footer></div><p>The <a href="https://microservices.io/patterns/service-registry.html">service registry pattern</a> is used to discover <a href="../user-task-provider/index.html">user task provider</a> instances.</p>
<p>When a user has claimed a task the user must complete, delegate or delay the task before claiming a new task.</p>
</div>
</div><div class="header-container h2">
    <div class="header"><h2 id="order-algorithm" tabindex="-1">Order algorithm <a class="header-anchor" href="#order-algorithm">¶</a></h2></div>
    <div class="container">
<p>The user tasks are ordered by urgency. The urgency is based on the following criteria:</p>
<ul>
<li>When is the user task created?</li>
<li>What is the user task due date?</li>
<li>What is the priority of the user task?</li>
</ul>
</div>
</div></div></main><script>window.x_md_docs_cli_basePath = '../../../';
window.x_md_docs_cli_branch = 'main'
</script><script src="../../../branches.js" charset="UTF-8"></script><script src="../../assets/iframe-resizer-dist/iframeResizer.min.js" charset="UTF-8"></script><script src="../../assets/bpmn-js-dist/bpmn-navigated-viewer.production.min.js" charset="UTF-8"></script><script src="../../assets/svg-pan-zoom-dist/svg-pan-zoom.min.js" charset="UTF-8"></script><script src="../../assets/prismjs/components/prism-core.min.js" charset="UTF-8"></script><script src="../../assets/prismjs/prism-autoloader.min.js" charset="UTF-8"></script><script src="../../assets/prismjs/prism-line-numbers.min.js" charset="UTF-8"></script><script src="../../assets/scripts/bpmn.js" charset="UTF-8"></script><script src="../../assets/scripts/fullscreen.js" charset="UTF-8"></script><script src="../../assets/scripts/git.js" charset="UTF-8"></script><script src="../../assets/scripts/h3.js" charset="UTF-8"></script><script src="../../assets/scripts/header.js" charset="UTF-8"></script><script src="../../assets/scripts/iframe.js" charset="UTF-8"></script><script src="../../assets/scripts/menu.js" charset="UTF-8"></script><script src="../../assets/scripts/scroll-spy.js" charset="UTF-8"></script><script src="../../assets/scripts/svg.js" charset="UTF-8"></script><script src="../../assets/scripts/svg-pan-zoom.js" charset="UTF-8"></script><script src="../../assets/scripts/tabs.js" charset="UTF-8"></script><script src="../../assets/scripts/user-task.js" charset="UTF-8"></script><script src="../../assets/model-viewer/model-viewer.js" charset="UTF-8"></script></body></html>