openapi: 3.0.3
info:
  version: 0.0.1
  title: User task client
  description: ""
servers:
  - url: http://localhost:9001/
paths:
  /api/my-user-tasks:
    get:
      tags:
        - user-tasks
      summary: Gets a list of claimed or claimable user tasks.
      operationId: GetMyUserTasks
      parameters:
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            example: 10
            minimum: 1
            maximum: 100
            description: Limit the number of responses.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                title: response
                type: object
                properties:
                  messages:
                    type: array
                    items:
                      type: object
                      required:
                        - type
                        - message
                      properties:
                        type:
                          type: string
                          description: The type of message.
                          enum:
                            - ERROR
                            - WARN
                            - INFO
                          example: ERROR
                        message:
                          type: string
                          description: The message.
                          example: Service x could not be reached.
                  items:
                    type: array
                    items:
                      title: user_tasks_model
                      type: object
                      required:
                        - user_task_id
                        - name
                        - due_date
                        - links
                      properties:
                        user_task_id:
                          type: string
                          example: dcb47fd6-5695-4c98-8f13-11c516fd0b8d
                        name:
                          type: string
                          example: Answer question
                        description:
                          type: string
                          example: Question for Company X sent by John Doen regarding loan applications.
                        icon:
                          type: string
                          format: material-icon
                          description: See https://fonts.google.com/icons
                          example: Task alt
                        priority:
                          type: integer
                          minimum: 1
                          maximum: 100
                          default: 50
                        badge:
                          title: badge
                          type: object
                          required:
                            - type
                            - message
                          properties:
                            type:
                              type: string
                              enum:
                                - ERROR
                                - WARN
                                - INFO
                              example: WARN
                            message:
                              type: string
                              example: The task is almost overdue.
                        due_date:
                          type: string
                          format: date-time
                        delayed_until:
                          type: string
                          format: date-time
                        claimed_on:
                          type: string
                          format: date-time
                        links:
                          type: object
                          required:
                            - href
                            - claim
                            - delay
                          properties:
                            href:
                              type: string
                              format: uri
                              description: Webpage where the user can handle the user task
                              example: https://task-client.com//my-tasks/dcb47fd6-5695-4c98-8f13-11c516fd0b8d
                            claim:
                              type: string
                              format: uri
                              description: Rest uri to claim the user task on behalve of the user.
                              example: https://task-client.com/api/my-tasks/dcb47fd6-5695-4c98-8f13-11c516fd0b8d/claim
                            delay:
                              type: string
                              format: uri
                              description: Rest uri to delay the user task on behalve of the user.
                              example: https://task-client.com/api/my-tasks/dcb47fd6-5695-4c98-8f13-11c516fd0b8d/delay
                            delegate:
                              type: string
                              format: uri
                              description: Rest uri to delegate the user task on behalve of the user.
                              example: https://task-client.com/api/my-tasks/dcb47fd6-5695-4c98-8f13-11c516fd0b8d/delegate
                            delegators:
                              type: string
                              format: uri
                              description: Rest uri from where to retieve a list of users to who are
                                authorized for delegation.
                              example: https://task-client.com/api/my-tasks/dcb47fd6-5695-4c98-8f13-11c516fd0b8d/delegators
                        ext:
                          type: object
                          description: Object for additional non-standard attributes
        "401":
          description: User is not authenticated
        "403":
          description: User is not authorized
  "/api/my-user-tasks/{user_task_id}":
    parameters:
      - in: path
        name: user_task_id
        required: true
        schema:
          type: string
          example: dcb47fd6-5695-4c98-8f13-11c516fd0b8d
    get:
      tags:
        - user-task
      summary: Gets a claimed user task.
      operationId: GetMyUserTask
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                title: response
                type: object
                required:
                  - user_task_id
                  - correlation_id
                  - name
                  - due_date
                properties:
                  messages:
                    type: array
                    items:
                      type: object
                      required:
                        - type
                        - message
                      properties:
                        type:
                          type: string
                          description: The type of message.
                          enum:
                            - ERROR
                            - WARN
                            - INFO
                          example: ERROR
                        message:
                          type: string
                          description: The message.
                          example: Service x could not be reached.
                  user_task_id:
                    type: string
                    example: dcb47fd6-5695-4c98-8f13-11c516fd0b8d
                  user_task_reference_id:
                    type: string
                    example: e15dc06f-a54b-4396-aec5-788417142b1c
                  correlation_id:
                    type: string
                    format: uuid
                    description: Id of the first command which has started a chain of commands. May
                      be empty if it's the beginning of a command chain.
                    example: 48c274d1-0976-49ca-bb70-6e3ced85b629
                  causation_id:
                    type: string
                    format: uuid
                    description: Id of the (last) command which has caused this command to be
                      triggered.
                    example: e62c8928-026e-493b-9ad1-1ffca6e19e61
                  name:
                    type: string
                    example: Answer question
                  context:
                    type: string
                    example: Question for Company X sent by John Doen regarding loan applications.
                  icon:
                    type: string
                    format: material-icon
                    description: See https://fonts.google.com/icons
                    example: Task alt
                  badge:
                    title: badge
                    type: object
                    required:
                      - type
                      - message
                    properties:
                      type:
                        type: string
                        enum:
                          - ERROR
                          - WARN
                          - INFO
                        example: WARN
                      message:
                        type: string
                        example: The task is almost overdue.
                  due_date:
                    type: string
                    format: date-time
                  delayed_until:
                    type: string
                    format: date-time
                  claimed_on:
                    type: string
                    format: date-time
                  claimed_by:
                    type: string
                    example: john.doe
                  links:
                    type: object
                    required:
                      - href
                      - claim
                      - delay
                    properties:
                      href:
                        type: string
                        format: uri
                        description: Webpage where the user can handle the user task
                        example: https://task-client.com//my-tasks/dcb47fd6-5695-4c98-8f13-11c516fd0b8d
                      claim:
                        type: string
                        format: uri
                        description: Rest uri to claim the user task on behalve of the user.
                        example: https://task-client.com/api/my-tasks/dcb47fd6-5695-4c98-8f13-11c516fd0b8d/claim
                      delay:
                        type: string
                        format: uri
                        description: Rest uri to delay the user task on behalve of the user.
                        example: https://task-client.com/api/my-tasks/dcb47fd6-5695-4c98-8f13-11c516fd0b8d/delay
                      delegate:
                        type: string
                        format: uri
                        description: Rest uri to delegate the user task on behalve of the user.
                        example: https://task-client.com/api/my-tasks/dcb47fd6-5695-4c98-8f13-11c516fd0b8d/delegate
                      delegators:
                        type: string
                        format: uri
                        description: Rest uri from where to retieve a list of users to who are
                          authorized for delegation.
                        example: https://task-client.com/api/my-tasks/dcb47fd6-5695-4c98-8f13-11c516fd0b8d/delegators
                  ext:
                    type: object
                    description: Object for additional non-standard attributes
        "401":
          description: User is not authenticated
        "403":
          description: User is not authorized for this user task
        "404":
          description: User task not found
  "/api/my-user-tasks/{user_task_id}/claim":
    parameters:
      - in: path
        name: user_task_id
        required: true
        schema:
          type: string
          example: dcb47fd6-5695-4c98-8f13-11c516fd0b8d
    put:
      tags:
        - user-task
      summary: Claims an unclaimed user task.
      operationId: ClaimUserTask
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - command_id
                - origin
              title: claim_user_task_command
              properties:
                command_id:
                  type: string
                  format: uuid
                  description: Unique of the command. May be used as an idemptotency key.
                  example: afa0f657-ba5b-4f6f-bc4e-6ac8dd63d76b
                correlation_id:
                  type: string
                  format: uuid
                  description: Id of the first command which has started a chain of commands. May
                    be empty if it's the beginning of a command chain.
                  example: 48c274d1-0976-49ca-bb70-6e3ced85b629
                causation_id:
                  type: string
                  format: uuid
                  description: Id of the (last) command which has caused this command to be
                    triggered.
                  example: e62c8928-026e-493b-9ad1-1ffca6e19e61
                origin:
                  type: object
                  description: The description if the commands origin.
                  required:
                    - origin_id
                    - name
                  properties:
                    origin_id:
                      type: string
                      format: uuid
                      description: The id of the origin sevice.
                      example: 37702c9b-c15b-4558-8dde-aa8a3c206833
                    name:
                      type: string
                      format: uuid
                      description: The name of the origin sevice.
                      example: loan service
      responses:
        "202":
          description: Accepted
        "401":
          description: Not authenticed
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
        "403":
          description: Not authorized
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
        "404":
          description: Not found
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
  "/api/my-user-tasks/{user_task_id}/delay":
    parameters:
      - in: path
        name: user_task_id
        required: true
        schema:
          type: string
          example: dcb47fd6-5695-4c98-8f13-11c516fd0b8d
    put:
      tags:
        - user-task
      summary: Delays a claimed user task.
      operationId: DelayUserTask
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - command_id
                - delay_until
                - origin
              title: delay_user_task_command
              properties:
                command_id:
                  type: string
                  format: uuid
                  description: Unique of the command. May be used as an idemptotency key.
                  example: afa0f657-ba5b-4f6f-bc4e-6ac8dd63d76b
                correlation_id:
                  type: string
                  format: uuid
                  description: Id of the first command which has started a chain of commands. May
                    be empty if it's the beginning of a command chain.
                  example: 48c274d1-0976-49ca-bb70-6e3ced85b629
                causation_id:
                  type: string
                  format: uuid
                  description: Id of the (last) command which has caused this command to be
                    triggered.
                  example: e62c8928-026e-493b-9ad1-1ffca6e19e61
                origin:
                  type: object
                  description: The description if the commands origin.
                  required:
                    - origin_id
                    - name
                  properties:
                    origin_id:
                      type: string
                      format: uuid
                      description: The id of the origin sevice.
                      example: 37702c9b-c15b-4558-8dde-aa8a3c206833
                    name:
                      type: string
                      format: uuid
                      description: The name of the origin sevice.
                      example: loan service
                delay_until:
                  type: string
                  format: date-time
      responses:
        "202":
          description: Accepted
        "401":
          description: Not authenticed
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
        "403":
          description: Not authorized
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
        "404":
          description: Not found
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
  "/api/my-user-tasks/{user_task_id}/delegate":
    parameters:
      - in: path
        name: user_task_id
        required: true
        schema:
          type: string
          example: dcb47fd6-5695-4c98-8f13-11c516fd0b8d
    put:
      tags:
        - user-task
      summary: Delegates a claimed user task.
      operationId: DelegateUserTask
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - command_id
                - message
                - origin
                - user_id
              title: delegate_user_task_command
              properties:
                command_id:
                  type: string
                  format: uuid
                  description: Unique of the command. May be used as an idemptotency key.
                  example: afa0f657-ba5b-4f6f-bc4e-6ac8dd63d76b
                correlation_id:
                  type: string
                  format: uuid
                  description: Id of the first command which has started a chain of commands. May
                    be empty if it's the beginning of a command chain.
                  example: 48c274d1-0976-49ca-bb70-6e3ced85b629
                causation_id:
                  type: string
                  format: uuid
                  description: Id of the (last) command which has caused this command to be
                    triggered.
                  example: e62c8928-026e-493b-9ad1-1ffca6e19e61
                origin:
                  type: object
                  description: The description if the commands origin.
                  required:
                    - origin_id
                    - name
                  properties:
                    origin_id:
                      type: string
                      format: uuid
                      description: The id of the origin sevice.
                      example: 37702c9b-c15b-4558-8dde-aa8a3c206833
                    name:
                      type: string
                      format: uuid
                      description: The name of the origin sevice.
                      example: loan service
                delegate_to:
                  type: string
                  example: john.doe
                message:
                  type: string
                  format: markdown
      responses:
        "202":
          description: Accepted
        "401":
          description: Not authenticed
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
        "403":
          description: Not authorized
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
        "404":
          description: Not found
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
  "/api/my-user-tasks/{user_task_id}/delegators":
    parameters:
      - in: path
        name: user_task_id
        required: true
        schema:
          type: string
          example: dcb47fd6-5695-4c98-8f13-11c516fd0b8d
    get:
      tags:
        - user-task-delegators
      summary: Gets a list of users who are authorized for this user task delegation.
      operationId: GetUserTaskDelegators
      parameters:
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            example: 10
            minimum: 1
            maximum: 100
            description: Limit the number of responses.
        - in: query
          name: offset
          schema:
            type: string
            example: john.doe
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                title: response
                type: object
                required:
                  - links
                properties:
                  messages:
                    type: array
                    items:
                      type: object
                      required:
                        - type
                        - message
                      properties:
                        type:
                          type: string
                          description: The type of message.
                          enum:
                            - ERROR
                            - WARN
                            - INFO
                          example: ERROR
                        message:
                          type: string
                          description: The message.
                          example: Service x could not be reached.
                  links:
                    title: links
                    type: object
                    required:
                      - next
                    properties:
                      self:
                        type: string
                        format: uri
                        description: Link to the current offset.
                        example: https://service.domain.com/api/action?offset=f64910e7-1006-4c0c-b1fa-10033855770f&limit=1000
                      first:
                        type: string
                        format: uri
                        description: Link to the first offset.
                        example: https://service.domain.com/api/action?offset=f64910e7-1006-4c0c-b1fa-10033855770f&limit=1000
                      prev:
                        type: string
                        format: uri
                        description: Link to the previous offset.
                        example: https://service.domain.com/api/action?offset=f64910e7-1006-4c0c-b1fa-10033855770f&limit=1000
                      next:
                        type: string
                        format: uri
                        description: Link to the next offset.
                        example: https://service.domain.com/api/action?offset=f64910e7-1006-4c0c-b1fa-10033855770f&limit=1000
                      last:
                        type: string
                        format: uri
                        description: Link to the last offset.
                        example: https://service.domain.com/api/action?offset=f64910e7-1006-4c0c-b1fa-10033855770f&limit=1000
                  delegators:
                    type: array
                    items:
                      title: user_task_delegators_model
                      type: object
                      required:
                        - id
                        - name
                      properties:
                        id:
                          type: string
                          example: john.doe
                        name:
                          type: string
                          example: John Doe
                        ext:
                          type: object
                          description: Object for additional non-standard attributes
        "401":
          description: Not authenticed
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
        "403":
          description: Not authorized
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
        "404":
          description: Not found
          content:
            application/problem+json:
              schema:
                title: problem
                type: object
                properties:
                  status:
                    type: string
                    description: The HTTP status code
                    example: 404
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type
                    example: Resource not found
                  detail:
                    type: string
                    description: A human-readable explanation specific to this occurrence of the
                      problem
                required:
                  - status
                  - title
